@{
    ViewData["Title"] = "系統登入";
    Layout = null;
}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" 
    rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }

        .login-container {
            background-color: #fff;
            padding: 20px;
            border-radius: 5px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            width: 300px;
        }

        .login-container h2 {
            margin-bottom: 20px;
            text-align: center;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .form-group input {
            width: 100%;
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }

        .form-group button {
            width: 100%;
            padding: 10px;
            background-color: #007bff;
            color: #fff;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        .form-group button:hover {
            background-color: #0056b3;
        }

        .error-message {
            color: red;
            margin-top: 10px;
        }
    </style>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"
            integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo="
            crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js" 
            integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13" crossorigin="anonymous"></script>
    <script>
        (function (undefined) {
           
        })();

        $(document).ready(function () {
            //'use strict';
            var root = '@Url.Content("~/")';
            window.appRoot = {
                rel: root,
                full: location.origin + root
            };

            //refreshCaptcha(); 
            getCampus();

        });

        $('loginForm').click(function () {
            alert('123')

            var username = $('#username').val();
            var password = $('#password').val();
            var campus = $('#campusDropdown').val();

            var captcha = $('#captcha').val();

            var tt = JSON.stringify({
                username,
                password,
                campus
            });
            console.log(tt);

            // var errorMessage = $('#errorMessage');
            // if (username === '' || password === '' || captcha === '') {
            //     errorMessage.text('Please fill in all fields.');
            //     errorMessage.show();
            // } else {
            //     errorMessage.hide();

            //     // 發送 AJAX POST 請求到後端驗證 API
            //     $.ajax({
            //         url: `${window.appRoot.full}Api/Account/login`,
            //         method: 'POST',
            //         contentType: 'application/json',
            //         data: tt,
            //         success: function (response) {
            //             // 登錄成功，重新導向到首頁或其他頁面
            //             window.location.href = '/home/EntryRecord';
            //         },
            //         error: function (xhr, textStatus, errorThrown) {
            //             // 登錄失敗，顯示錯誤信息
            //             errorMessage.text('Invalid credentials.');
            //             errorMessage.show();
            //         }
            //     });
            // }

        });
        function refreshCaptcha() {
            $.get(`${window.appRoot.full}Api/Account/Captcha`)
                .done(function (res) {
                    console.log('res', res)
                    $('#captchaImage').attr('src', 'data:image/jpeg;base64,' + res);
                })
                .fail(function (error) {
                    console.log('error', error)
                    console.error('Error refreshing captcha:', error);
                });
        }
        function getCampus() {
            $.get(`${window.appRoot.full}Api/Account/GetAllCampuses`, function (data) {
                // 將返回的資料用於動態建立選項
                data.forEach(function (campus) {
                    $("#campusDropdown").append(`<option value="${campus.id}">${campus.campusName}</option>`);
                });
            });
        }

    </script>
</head>
<body>
    <div class="login-container">
        <h2>Login</h2>
        <div >
            <div class="form-group">
                <label for="username">Username</label>
                <input type="text" id="username" required>
            </div>
            <div class="form-group">
                <label for="password">Password</label>
                <input type="password" id="password" required>
            </div>
            <div class="form-group">
                <label for="campusDropdown">Campus</label>
                <select class="form-select" id="campusDropdown"></select>
            </div>
            @* <div class="form-group">
                <label for="captcha">Captcha</label>
                <img id="captchaImage" src="/Account/Captcha" alt="Captcha Image" />
                <button type="button" onclick="refreshCaptcha()">Refresh Captcha</button>
                <input type="text" id="captcha" name="captcha" required>
            </div> *@
            <div class="form-group">
                <button type="button" id="loginForm">LoginX</button>
            </div>
            <div id="errorMessage" class="error-message" style="display: none;"></div>
        </div>
    </div>

</body>
</html>
